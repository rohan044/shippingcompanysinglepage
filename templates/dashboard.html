<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>

    function addField() 
    
      {

        $('#myModal').modal('show'); 

        /* var currentIndex = document.getElementById("endpoint_table").rows.length;
        var currentIndex1 = document.getElementById("endpoint_table").rows.length-1;

        var x=document.getElementById('endpoint_table').insertRow(currentIndex);
        var y = x.insertCell(0);
        var z = x.insertCell(1);
        var m = x.insertCell(2);
        var n = x.insertCell(3);
        var o = x.insertCell(4);
        var p = x.insertCell(5);
        var q = 
        y.innerHTML= currentIndex1;
        z.innerHTML="<input type='text' id='name' placeholder='Enter Name' name='name' required/>";
        m.innerHTML="<input type='text' id='ip' placeholder='Enter ip' name='ip' required/>";
        n.innerHTML="";
        o.innerHTML="";
        p.innerHTML=""; */
    
     }
    
  </script>
{% extends "bootstrap/base.html" %}
{% block title %}
Dashboard
{% endblock %}

{% block styles %}
{{super()}}
<link rel="stylesheet" href="{{url_for('.static', filename='dashboard.css')}}">
{% endblock %}

{% block content %}
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Cisco Endpoint Management System</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="#">Dashboard</a></li>
            <li><a href="#">Settings</a></li>
            <li><a href="#">Profile</a></li>
            <li><a href="{{ url_for('logout') }}">Log Out</a></li>
          </ul>
          <form class="navbar-form navbar-right">
            <input type="text" class="form-control" placeholder="Search...">
          </form>
        </div>
      </div>
    </nav>

    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-3 col-md-2 sidebar">
          <ul class="nav nav-sidebar">
            <li class="active"><a href="#">Overview <span class="sr-only">(current)</span></a></li>
            <li><a href="#">Users</a></li>
            <li><a href="#">Endpoint Report</a></li>
            <li><a href="{{ url_for('upgradePage') }}">Upgrade Any Endpoint</a></li>
            <li><a href="{{ url_for('addSwPage') }}">Add software package</a></li>


          </ul>
         
        </div>
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
          <h1 class="page-header">Welcome, {{ name }}</h1>

        

          <h2 class="sub-header">Endpoints</h2>
          <input type="button"  value="Add another endpoint" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">

          <div class="table-responsive">
            <table class="table table-striped" id="endpoint_table">

                
                
              <thead>
                <tr>
                  <th>#</th>
                  <th>Endpoint Name</th>
                  <th>Endpoint IP</th>
                  <th>Registered To</th>
                  <th>Status</th>
                  <th>Current SW Version</th>
                  <th>Owner</th>
                </tr>

                
              </thead>
              <tbody>
                {% for i in device_association %}
                <tr>
                  <td>{{i.id}}</td>
                  <td>{{i.endpoint_name}}</td>
                  <td><a href="https://{{i.ip}}">{{i.ip}}</a></td>
                  <td>{{i.registered_to}}</td>
                  <td>{{i.status}}</td>
                  <td>{{i.software_version}}</td>
                  <td>{{i.owner}}</td>
                  
                </tr>
                
                {% endfor %}

  

              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    

    <div id="myModal" class="modal fade" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
              </div>
             
                  <h2>Endpoint Details form</h2>
                  <form action="/addEndpointDetails" method="POST">
                
                    <div class="form-group">
                      <label for="ip">IP:</label>
                      <input type="text" class="form-control" id="ip" placeholder="Enter IP" name="ip" required>
                    </div>

                    <div class="form-group">
                      <label for="owner">Owner:</label>
                      <input type="text" class="form-control" id="owner" placeholder="Device Owner" name="owner" required>
                    </div>

                    <div class="form-group">
                      <label for="username">Username:</label>
                      <input type="text" class="form-control" id="ip" placeholder="Enter Username" name="username" required>
                    </div>

                    <div class="form-group">
                      <label for="password">Password:</label>
                      <input type="password" class="form-control" id="ip" placeholder="Enter Password" name="password" >
                    </div>
                
                    <button type="submit" class="btn btn-primary">Submit</button>
                  </form>
              <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              </div>
            </div>
        
          </div>
     </div>

    
{% endblock %}


